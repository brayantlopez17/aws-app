version: 1.0

# The instance configuration
instance_configuration:
  runtime: python3
  instance_type: F1.micro  # Choose an instance type that suits your application's needs

# The build configuration
build:
  runtime: python3
  build_command: |
    pip install -r requirements.txt
    python manage.py collectstatic --noinput
  start_command: python manage.py runserver 0.0.0.0:8000

# The environment configuration
environment:
  variables:
    DJANGO_SETTINGS_MODULE: myproject.settings
    DEBUG: 'False'
    ALLOWED_HOSTS: '.awsapprunner.com'

# Health check configuration
health_check:
  protocol: HTTP
  path: /health/
  interval: 30
  timeout: 5
  healthy_threshold: 3
  unhealthy_threshold: 3
